package com.example.aademo;import android.graphics.Rect;import android.os.Bundle;import android.util.DisplayMetrics;import android.view.View;import android.view.View.OnClickListener;import android.widget.Button;import android.widget.EditText;import android.widget.TextView;public class ScaleTextViewActivity extends BaseActivity {	TextView tv;	EditText edit_text;	Button btn_ok;	DisplayMetrics displayMetrics;	@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.scale_main);		displayMetrics = new DisplayMetrics();		getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);				tv=(TextView)findViewById(R.id.scale_tv);		edit_text=findView(R.id.scale_edit);		btn_ok=findView(R.id.scale_btn);		btn_ok.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View v) {				tv.setTextSize(15);				setTextSizeByStrLength(tv, edit_text.getText().toString(), 0);				tv.setText(edit_text.getText().toString());			}		});	}		/**	 * 自动根据字体的长度来决定textview的textSize大小	 * @param tv 待设置的textview	 * @param str设置的字符串	 * @param offsetSize 偏移大小	 * 使用方法如下:	 * 比如原先的textsize=20,strlength=20;	 * 当strlength==30的时候textsize=(20/30)*20==13	 * 当strlength==40的时候textsize=(20/40)*20==10	 */	public  void setTextSizeByStrLength(TextView tv,String str,float offsetSize){		Rect rect=new Rect();		tv.getPaint().getTextBounds(str, 0, str.length(), rect);		float textLen=rect.right-rect.left;		float tvLen=tv.getWidth();		//如果应的长度>=控件的长度*1.1就自动缩小size		if(tvLen>1&&textLen>tvLen){			float size=tv.getTextSize()/displayMetrics.density;//换算成sp//			PalLog.printD(textLen+","+tvLen*1.1+","+size);			size*=(tvLen/textLen);//			PalLog.printD(textLen+","+tvLen*1.1+","+size);			tv.setTextSize(size-offsetSize);		}	}}